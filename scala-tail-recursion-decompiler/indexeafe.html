<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

	<title>Scala tail recursion and decompiler adventures &#8211; Ikke&#039;s blog</title>
	
	<link rel="alternate" type="application/rss+xml" href="../feed/index.html" title="Ikke&#039;s blog latest posts" />
	<link rel="alternate" type="application/rss+xml" href="../comments/feed/index.html" title="Ikke&#039;s blog latest comments" />
	<link rel="pingback" href="../xmlrpc.php" />
		<link rel='archives' title='April 2010' href='../2010/04/index.html' />
	<link rel='archives' title='March 2010' href='../2010/03/index.html' />
	<link rel='archives' title='February 2010' href='../2010/02/index.html' />
	<link rel='archives' title='November 2009' href='../2009/11/index.html' />
	<link rel='archives' title='August 2009' href='../2009/08/index.html' />
	<link rel='archives' title='July 2009' href='../2009/07/index.html' />
	<link rel='archives' title='May 2009' href='../2009/05/index.html' />
	<link rel='archives' title='April 2009' href='../2009/04/index.html' />
	<link rel='archives' title='January 2009' href='../2009/01/index.html' />
	<link rel='archives' title='November 2008' href='../2008/11/index.html' />
	<link rel='archives' title='September 2008' href='../2008/09/index.html' />
	<link rel='archives' title='August 2008' href='../2008/08/index.html' />
	<link rel='archives' title='July 2008' href='../2008/07/index.html' />
	<link rel='archives' title='May 2008' href='../2008/05/index.html' />
	<link rel='archives' title='February 2008' href='../2008/02/index.html' />
	<link rel='archives' title='January 2008' href='../2008/01/index.html' />
	<link rel='archives' title='December 2007' href='../2007/12/index.html' />
	
	<link rel="stylesheet" type="text/css" media="screen" href="../wp-content/themes/carrington/css/css.css" />

	<!--[if lte IE 7]>
		<link rel="stylesheet" href="http://eikke.com/wp-content/themes/carrington/css/ie.css" type="text/css" media="screen" />
	<![endif]-->
	
	<!--[if lte IE 6]>
		<link rel="stylesheet" href="http://eikke.com/wp-content/themes/carrington/css/ie6.css" type="text/css" media="screen" />

		<script type="text/javascript" src="http://eikke.com/wp-content/themes/carrington/js/DD_belatedPNG.js"></script>
		<script type="text/javascript">
			DD_belatedPNG.fix('img, #header, #footer, #header .wrapper, #footer .wrapper, #TB_title, #developer-link a');
		</script>
	<![endif]-->
	
	<link rel="alternate" type="application/rss+xml" title="Ikke&#039;s blog &raquo; Scala tail recursion and decompiler adventures Comments Feed" href="feed/index.html" />
<script type='text/javascript' src='http://eikke.com/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script>
<script type='text/javascript' src='../wp-content/themes/carrington/js/carrington5152.js?ver=1.0'></script>
<script type='text/javascript' src='../wp-content/themes/carrington/carrington-core/lightbox/thickbox5152.js?ver=1.0'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://eikke.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Importing a Git tree into a Subversion repository' href='../importing-a-git-tree-into-a-subversion-repository/index.html' />
<link rel='next' title='Facebook goes XMPP?' href='../facebook-goes-xmpp/index.html' />
<meta name="generator" content="WordPress 3.4.1" />
<link rel='canonical' href='index.html' />
<link rel='shortlink' href='http://wp.me/p9YZd-25' />
<meta name='robots' content='noindex,nofollow' />

<link rel="stylesheet" type="text/css" media="screen" href="http://eikke.com/wp-content/themes/carrington/carrington-core/lightbox/css/thickbox.css" />
		
<script type="text/javascript">
var CFCT_URL = "http://eikke.com/";
var CFCT_AJAX_LOAD = true;
</script>
	
<script type="text/javascript">
tb_pathToImage = "http://eikke.com/wp-content/themes/carrington/carrington-core/lightbox/img/loadingAnimation.gif";
jQuery(function($) {
	$("a.thickbox").each(function() {
		var url = $(this).attr("rel");
		var post_id = $(this).parents("div.post, div.page").attr("id");
		$(this).attr("href", url).attr("rel", post_id);
	});
});
</script>
		
	<!-- OpenID stuff -->
	<link rel="openid.server" href="http://www.myopenid.com/server" />
	<link rel="openid.delegate" href="http://ikke.myopenid.com/" />
	<link rel="openid2.local_id" href="http://ikke.myopenid.com/" />
	<link rel="openid2.provider" href="http://www.myopenid.com/server" />
	<meta http-equiv="X-XRDS-Location" content="http://ikke.myopenid.com/xrds" />
</head>

<body>
	<div id="page">
		<div id="top"><a class="accessibility" href="#content">Skip to content</a></div>
		<hr class="lofi" />
		<div id="header" class="section">
			<div class="wrapper">
				<strong id="blog-title"><a href="http://eikke.com/" rel="home">Ikke&#039;s blog</a></strong>
				<p id="blog-description">&#039;cause this is what I do</p>
				<div id="navigation">
					<ul class="nav clearfix">
						<li><a href="http://eikke.com/">Home</a></li>
						<li><a href="http://eikke.com/articles/">Articles</li>
						<li><a href="http://eikke.com/code/">Code</li>
						<li><a href="http://eikke.com/ivman/">Ivman</li>
						<li class="secondary"><a href="http://eikke.com/wp-login.php">Log in</a></li>
						 
					</ul>
				</div><!-- #navigation -->
			</div><!-- .wrapper -->
		</div><!-- #header -->
		<div id="sub-header" class="section">
			<div class="wrapper">
				<form method="get" action="http://eikke.com/google-search/" id="cse-search-box">
  <div>
    <input type="hidden" name="cx" value="partner-pub-7170970013053423:koq3ee4wyns" />
    <input type="hidden" name="cof" value="FORID:10" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" value="" size="15" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
				<div id="all-categories">
					<script type="text/javascript"><!--
google_ad_client = "pub-7170970013053423";
/* eikke.com Carrington top 728x15 */
google_ad_slot = "1265244087";
google_ad_width = 728;
google_ad_height = 15;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
				</div><!-- #list-categories -->
			</div><!-- .wrapper -->
		</div><!--#sub-header-->
		<hr class="lofi" />
		<div id="main" class="section">
			<div class="wrapper">

<div id="content">
<div id="post-content-129" class="post-129 post type-post status-publish format-standard hentry category-development category-technology tag-development tag-functional-programming tag-java tag-scala full">
	
	<h1 class="entry-title full-title"><a href="http://eikke.com/scala-tail-recursion-decompiler/" title="Permanent link to Scala tail recursion and decompiler adventures" rel="bookmark" rev="post-129">Scala tail recursion and decompiler adventures</a></h1>
	
	<div class="entry-content full-content">
<p>I&#8217;ve been into <a href="http://www.scala-lang.org/">Scala</a> lately. More about it will follow later, but there&#8217;s something I found out which I really like.</p>
<p>Last couple of days I wrote some very basic Scala snippets, containing constructs which would be non-trivial or &#8216;unusual&#8217; to write in <a href="http://java.sun.com/">Java</a>, compile it to a class file, and then use a <a href="http://java.decompiler.free.fr/">Java decompiler</a> to figure out how the Scala compiler maps those constructs to JVM bytecodes.</p>
<p>There&#8217;s one thing which took my attention: looks like (basic) tail-recursive functions are optimized into while-loops! This only happens if the last call of a function is a call to itself (the most basic form of tail recursion), but it&#8217;s an interesting feature anyway&#8230; No more need to put socket accept handling in an infinite while loop <img src='http://eikke.com/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /><br />
<span id="more-129"></span><br />
A little demo. First, here&#8217;s a Scala object which implements a very basic &#8216;reduce&#8217; function:</p>
<pre>
object Reducer {
  def reduce[T, V](fun: (V, T) => V, values: List[T], initial: V): V = {
    if(values isEmpty)
      return initial
    val next = fun(initial, values head)
    return reduce(fun, values tail, next)
  }

  def main(args: Array[String]): Unit = {
    val values = List(1, 2, 3, 4)
    val sum = reduce[Int, Int]((x, y) => x + y, values, 0)
    println("Result: " + sum)
  }
}
</pre>
<p>We can compile and run this, and it&#8217;ll output the expected result &#8217;10&#8242;:</p>
<pre>MacBook:reduce nicolas $ scalac Reducer.scala 
MacBook:reduce nicolas $ scala Reducer
Result: 10</pre>
<p>Now we can open the generated class files in JD. There are a couple of them (it&#8217;s interesting to take a look at all of them and figure out what they represent exactly), but in this case we need &#8216;Reducer$.class&#8217;, which contains the implementations of our public functions, including &#8216;reduce&#8217;.</p>
<p>Here&#8217;s the Java version of the &#8216;reduce&#8217; function:</p>
<pre>public &lt;T, V&gt; V reduce(Function2&lt;V, T, V&gt; fun, List&lt;T&gt; values, V initial)
{
  while (true)
  {
    if (values.isEmpty())
      return initial;
    Object next = fun.apply(initial, values.head());
    initial = next;
    values = values.tail();
  }
}
</pre>
<p>&#8216;Function2&#8242; is a built-in Scala type which represents a function taking 2 parameters. As you can see, this code does exactly the same as our Scala version and is most likely the way we&#8217;d write the code manually as well (the only thing I don&#8217;t get is why &#8216;next&#8217; is an Object and not a &#8216;V&#8217;, I might figure that out later), but without forcing us to write the imperative code, whilst still producing bytecodes which will most likely show the best performance on the JVM (which currently has no tail recursion optimization support (although <a href="http://openjdk.java.net/projects/mlvm/subprojects.html#TailCalls">that might change one day</a>)).</p>
<p>I like it <img src='http://eikke.com/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
<p>[update]<br />
For reference, here&#8217;s a slightly more Scala-ish implementation of <em>reduce</em>, showing the same time performance characteristics during some basic profiling. I was not able to get JD nor jad to generate any usable decompiled code though:</p>
<pre>
def reduce[T, V](fun: (V, T) => V, values: List[T], initial: V): V = {
    values match {
        case List() => initial;
        case head :: tail => reduce(fun, tail, fun(initial, head))
    }
}
</pre>
<p>It uses Scala&#8217;s &#8220;List&#8221; pattern matching functionality.</p>
		<div class="clear"></div>
	</div><!-- .entry-content-->
	
	<p class="filed categories alt-font tight">Posted in <a href="http://eikke.com/category/development/" title="View all posts in Development" rel="category tag">Development</a>, <a href="http://eikke.com/category/technology/" title="View all posts in Technology" rel="category tag">Technology</a>.</p>
	<p class="filed tags alt-font tight">Tagged with <a href="http://eikke.com/tag/development/" rel="tag">Development</a>, <a href="http://eikke.com/tag/functional-programming/" rel="tag">functional programming</a>, <a href="http://eikke.com/tag/java/" rel="tag">java</a>, <a href="http://eikke.com/tag/scala/" rel="tag">scala</a>.</p>
	
	<p class="by-line">
		<span class="author vcard full-author">
			<span class="by alt-font">By</span> <a class="url fn" href="http://eikke.com/author/nicolas/" title="View all posts by Nicolas">Nicolas</a>		</span>
		<span class="date full-date"><span class="ndash alt-font">&ndash;</span> <abbr class="published" title="2009-08-12T23:31">August 12, 2009</abbr></span>
	</p><!--/by-line-->

	<div id="post-comments-129-target"></div>
	<div class="clear"></div>
	
	</div><!-- .post -->
	<div id="comments">
<div class="rule-major"><hr /></div>
<h2 class="h1 comments-title" id="comments">7 Responses</h2>

<p>Stay in touch with the conversation, subscribe to the <a class="feed" rel="alternate" href="http://eikke.com/scala-tail-recursion-decompiler/feed/"><acronym title="Really Simple Syndication">RSS</acronym> feed for comments on this post</a>.</p>

<ol class="commentlist hfeed">
<li class="li-comment" id="li-comment-26497">
	<div class="div-comment" id="div-comment-26497">

<div id="comment-26497" class="comment even thread-even depth-1 hentry">
	<address class="vcard author entry-title comment-author">
		<span class="photo avatar"><img alt='' src='http://0.gravatar.com/avatar/26ce53c20c5831d282772b3795c2429c?s=48&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=G' class='avatar avatar-48 photo' height='48' width='48' /></span>
<cite class="fn">Simon</cite> <span class="says">says</span>	</address><!--.vcard-->

	<div class="entry-content comment-content">
<p>Ran into an ugly little bit of Java code recently, that surely must have been written by a functional-language programmer &#8211; splitting a comma-separated string, implemented by tail recursion. Never mind that Java has better ways of splitting strings, such methods really don&#8217;t work under the JVM &#8211; the code was failing with the inevitable StackOverflowException&#8230;</p>
	</div><!--.entry-content-->
	<div class="clear"></div>
	<div class="comment-meta commentmetadata small">
		<span class="date comment-date">
			<abbr class="published" title="2009-08-13T00:12">August 13, 2009, <a title="Permanent link to this comment" rel="bookmark" href="http://eikke.com/scala-tail-recursion-decompiler/#comment-26497">00:12</a></abbr>
		</span><!--.date-->
<a class='comment-reply-link' href='http://eikke.com/scala-tail-recursion-decompiler/?replytocom=26497#respond-p129' onclick='return addComment.moveForm("comment-26497", "26497", "respond-p129", "129")'>Reply</a>	</div>
</div><!--.comment-->	</div>
</li>

<li class="li-comment" id="li-comment-26501">
	<div class="div-comment" id="div-comment-26501">

<div id="comment-26501" class="comment odd alt thread-odd thread-alt depth-1 hentry">
	<address class="vcard author entry-title comment-author">
		<span class="photo avatar"><img alt='' src='http://0.gravatar.com/avatar/8396048b39279996e7ee6c1acdac2bf7?s=48&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=G' class='avatar avatar-48 photo' height='48' width='48' /></span>
<cite class="fn">Berlin Brown</cite> <span class="says">says</span>	</address><!--.vcard-->

	<div class="entry-content comment-content">
<p>&#8220;the code was failing with the inevitable &#8221;</p>
<p>Yea and I always wonder how Java handles recursive calls.  I always feel that I can&#8217;t get more than 3000 calls on some of the most basic code.  I figure with the default 64MB jvm heap size, I sure hope the JVM can take more than that. </p>
<p>To the Scala code, have you tested if you increase the number of parameters in your reduce method.  I wonder if Scala will ever default to the Java recursive call if you have too many args.</p>
	</div><!--.entry-content-->
	<div class="clear"></div>
	<div class="comment-meta commentmetadata small">
		<span class="date comment-date">
			<abbr class="published" title="2009-08-13T04:39">August 13, 2009, <a title="Permanent link to this comment" rel="bookmark" href="http://eikke.com/scala-tail-recursion-decompiler/#comment-26501">04:39</a></abbr>
		</span><!--.date-->
<a class='comment-reply-link' href='http://eikke.com/scala-tail-recursion-decompiler/?replytocom=26501#respond-p129' onclick='return addComment.moveForm("comment-26501", "26501", "respond-p129", "129")'>Reply</a>	</div>
</div><!--.comment-->	</div>
</li>

<li class="li-comment" id="li-comment-26502">
	<div class="div-comment" id="div-comment-26502">

<div id="comment-26502" class="comment even thread-even depth-1 hentry">
	<address class="vcard author entry-title comment-author">
		<span class="photo avatar"><img alt='' src='http://0.gravatar.com/avatar/6f870e155737079b3fe09cd20a71a631?s=48&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=G' class='avatar avatar-48 photo' height='48' width='48' /></span>
<cite class="fn">Daniel Gonzalez</cite> <span class="says">says</span>	</address><!--.vcard-->

	<div class="entry-content comment-content">
<p>&#8220;the only thing I don’t get is why ‘next’ is an Object and not a ‘V’&#8221;<br />
That&#8217;s due to the way Generics work in Java: They only exist at compile time. JVM does NOT know a thing about Generics, it keeps on dealing with Object. As somebody said, Generics is &#8220;syntactical sugar&#8221;.</p>
<p>That also mean that you can&#8217;t rely on Generics for run time checks, because that information has been lost when transalated to bytecode.</p>
	</div><!--.entry-content-->
	<div class="clear"></div>
	<div class="comment-meta commentmetadata small">
		<span class="date comment-date">
			<abbr class="published" title="2009-08-13T07:33">August 13, 2009, <a title="Permanent link to this comment" rel="bookmark" href="http://eikke.com/scala-tail-recursion-decompiler/#comment-26502">07:33</a></abbr>
		</span><!--.date-->
<a class='comment-reply-link' href='http://eikke.com/scala-tail-recursion-decompiler/?replytocom=26502#respond-p129' onclick='return addComment.moveForm("comment-26502", "26502", "respond-p129", "129")'>Reply</a>	</div>
</div><!--.comment-->	</div>
</li>

<li class="li-comment" id="li-comment-26503">
	<div class="div-comment" id="div-comment-26503">

<div id="comment-26503" class="comment byuser comment-author-nicolas bypostauthor odd alt thread-odd thread-alt depth-1 hentry">
	<address class="vcard author entry-title comment-author">
		<span class="photo avatar"><img alt='' src='http://1.gravatar.com/avatar/5db180a41074c7f082b4b4057b7a016d?s=48&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=G' class='avatar avatar-48 photo' height='48' width='48' /></span>
<cite class="fn"><a href='http://eikke.com/' rel='external nofollow' class='url'>Nicolas</a></cite> <span class="says">says</span>	</address><!--.vcard-->

	<div class="entry-content comment-content">
<p>@Simon: I can imagine <img src='http://eikke.com/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' />  Using *any* functional construct in a primarily imperative language/environment might cause issues, but I do think having notions of functional concepts and techniques can also benefit imperative programmers and code quality.</p>
<p>@Berlin: Regarding number of arguments, I didn&#8217;t test it yet, but I expect things to work out fine, at least until 22 arguments (looks like 22 is the largest function arity in the Scala library: <a href="http://lampsvn.epfl.ch/svn-repos/scala/scala/trunk/src/library/scala/" rel="nofollow">http://lampsvn.epfl.ch/svn-repos/scala/scala/trunk/src/library/scala/</a>).</p>
<p>@Daniel: Thanks for the information, although I don&#8217;t really see how that applies here: why can&#8217;t the Scala compiler emit bytecodes which immediately identify &#8216;next&#8217; to be of type V? I might be missing something&#8230; Don&#8217;t know Java bytecodes at all, might need to peek into them one day.</p>
	</div><!--.entry-content-->
	<div class="clear"></div>
	<div class="comment-meta commentmetadata small">
		<span class="date comment-date">
			<abbr class="published" title="2009-08-13T08:18">August 13, 2009, <a title="Permanent link to this comment" rel="bookmark" href="http://eikke.com/scala-tail-recursion-decompiler/#comment-26503">08:18</a></abbr>
		</span><!--.date-->
<a class='comment-reply-link' href='http://eikke.com/scala-tail-recursion-decompiler/?replytocom=26503#respond-p129' onclick='return addComment.moveForm("comment-26503", "26503", "respond-p129", "129")'>Reply</a>	</div>
</div><!--.comment-->	</div>
</li>

<li class="li-comment" id="li-comment-26506">
	<div class="div-comment" id="div-comment-26506">

<div id="comment-26506" class="comment even thread-even depth-1 hentry">
	<address class="vcard author entry-title comment-author">
		<span class="photo avatar"><img alt='' src='http://0.gravatar.com/avatar/033726ace72804fcf9a9a60a0801d303?s=48&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=G' class='avatar avatar-48 photo' height='48' width='48' /></span>
<cite class="fn"><a href='http://blog.juma.me.uk/' rel='external nofollow' class='url'>Ismael Juma</a></cite> <span class="says">says</span>	</address><!--.vcard-->

	<div class="entry-content comment-content">
<p>Hi,</p>
<p>A very useful addition to Scala 2.8.0 (unreleased) is the @tailrec annotation. That allows you to tell the compiler to issue an error if it&#8217;s unable to apply the optimisation.</p>
<p>Best,<br />
Ismael</p>
	</div><!--.entry-content-->
	<div class="clear"></div>
	<div class="comment-meta commentmetadata small">
		<span class="date comment-date">
			<abbr class="published" title="2009-08-13T11:03">August 13, 2009, <a title="Permanent link to this comment" rel="bookmark" href="http://eikke.com/scala-tail-recursion-decompiler/#comment-26506">11:03</a></abbr>
		</span><!--.date-->
<a class='comment-reply-link' href='http://eikke.com/scala-tail-recursion-decompiler/?replytocom=26506#respond-p129' onclick='return addComment.moveForm("comment-26506", "26506", "respond-p129", "129")'>Reply</a>	</div>
</div><!--.comment-->	</div>
<ul class='children'>

<li class="li-comment" id="li-comment-26508">
	<div class="div-comment" id="div-comment-26508">

<div id="comment-26508" class="comment byuser comment-author-nicolas bypostauthor odd alt depth-2 hentry">
	<address class="vcard author entry-title comment-author">
		<span class="photo avatar"><img alt='' src='http://1.gravatar.com/avatar/5db180a41074c7f082b4b4057b7a016d?s=48&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=G' class='avatar avatar-48 photo' height='48' width='48' /></span>
<cite class="fn"><a href='http://eikke.com/' rel='external nofollow' class='url'>Nicolas</a></cite> <span class="says">says</span>	</address><!--.vcard-->

	<div class="entry-content comment-content">
<p>Ismael, I saw that while browsing the Scala sources, indeed <img src='http://eikke.com/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' />  Still on 2.7 though, looking forward to 2.8!</p>
	</div><!--.entry-content-->
	<div class="clear"></div>
	<div class="comment-meta commentmetadata small">
		<span class="date comment-date">
			<abbr class="published" title="2009-08-13T12:32">August 13, 2009, <a title="Permanent link to this comment" rel="bookmark" href="http://eikke.com/scala-tail-recursion-decompiler/#comment-26508">12:32</a></abbr>
		</span><!--.date-->
<a class='comment-reply-link' href='http://eikke.com/scala-tail-recursion-decompiler/?replytocom=26508#respond-p129' onclick='return addComment.moveForm("comment-26508", "26508", "respond-p129", "129")'>Reply</a>	</div>
</div><!--.comment-->	</div>
</li>
</ul>
</li>

<li class="li-comment" id="li-comment-35604">
	<div class="div-comment" id="div-comment-35604">

<div id="comment-35604" class="comment even thread-odd thread-alt depth-1 hentry">
	<address class="vcard author entry-title comment-author">
		<span class="photo avatar"><img alt='' src='http://0.gravatar.com/avatar/0a123b0dc2ee58fbc0f3d0870689ab76?s=48&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=G' class='avatar avatar-48 photo' height='48' width='48' /></span>
<cite class="fn">Jim</cite> <span class="says">says</span>	</address><!--.vcard-->

	<div class="entry-content comment-content">
<p>&#8220;Yea and I always wonder how Java handles recursive calls. I always feel that I can’t get more than 3000 calls on some of the most basic code. I figure with the default 64MB jvm heap size, I sure hope the JVM can take more than that. &#8221;</p>
<p>The limitation on the number of nested calls is determined by the (per-thread) stack size, not the heap size.  This can be expanded with -Xss jvm parameter.</p>
	</div><!--.entry-content-->
	<div class="clear"></div>
	<div class="comment-meta commentmetadata small">
		<span class="date comment-date">
			<abbr class="published" title="2010-06-05T07:19">June 5, 2010, <a title="Permanent link to this comment" rel="bookmark" href="http://eikke.com/scala-tail-recursion-decompiler/#comment-35604">07:19</a></abbr>
		</span><!--.date-->
<a class='comment-reply-link' href='http://eikke.com/scala-tail-recursion-decompiler/?replytocom=35604#respond-p129' onclick='return addComment.moveForm("comment-35604", "35604", "respond-p129", "129")'>Reply</a>	</div>
</div><!--.comment-->	</div>
</li>
</ol>
<div id="respond-p129">
	<form action="http://eikke.com/wp-comments-post.php" method="post" class="comment-form">
		<p class="comment-form-comment tight">
		<label class="h3" for="comment-p129">Leave a Reply to <a href="#comment-26508">Nicolas</a> <em id="cancel-comment-reply"><a rel="nofollow" id="cancel-comment-reply-link-p129" href="http://eikke.com/scala-tail-recursion-decompiler/#respond-p129">Cancel</a></em></label>
			<br class="lofi" />
			<span class="comment-form-comment-area">
				<textarea id="comment-p129" name="comment" rows="8" cols="40"></textarea><br />
				<em class="some-html-is-ok"><abbr title="You can use: &lt;a href=http://eikke.com/scala-tail-recursion-decompiler/"" title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; ">Some HTML is OK</abbr></em>
			</span>
		</p>
		<p class="comment-form-user-info tight">
			<input type="text" id="author-p129" name="author" value="" size="22" />
			<label for="author-p129">Name <em>(required)</em></label>
		</p><!--/name-->
		<p class="comment-form-user-info tight">
			<input type="text" id="email-p129" name="email" value="" size="22" />
			<label for="email-p129">Email  <em>(required, but never shared)</em></label>
		</p><!--/email-->
		<p class="comment-form-user-info tight">
			<input type="text" id="url-p129" name="url" value="" size="22" />
			<label title="Your website address" for="url-p129">Web</label>
		</p><!--/url-->
		<p class="tight">
			<input name="submit" type="submit" value="Post comment" />
			<span class="comment-form-trackback">or, reply to this post via <a rel="trackback" href="http://eikke.com/scala-tail-recursion-decompiler/trackback/">trackback</a>.</span>
		</p>
<input type='hidden' name='comment_post_ID' value='129' id='comment_post_ID_p129' />
<input type='hidden' name='comment_parent' id='comment_parent_p129' value='26508' />
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="69d024b7d8" /></p>	</form>
</div>
	</div><!--#comments-->

	<div class="pagination-single">
		<span class="previous">&laquo; <a href="http://eikke.com/importing-a-git-tree-into-a-subversion-repository/" rel="prev">Importing a Git tree into a Subversion repository</a></span>
		<span class="next"><a href="http://eikke.com/facebook-goes-xmpp/" rel="next">Facebook goes XMPP?</a> &raquo;</span>
	</div>

</div><!--#content-->

<hr class="lofi" />
<div id="sidebar">
	<div id="carrington-subscribe" class="widget">
		<h2 class="widget-title">Subscribe</h2>
		<a class="feed alignright" title="RSS 2.0 feed for posts" rel="alternate" href="http://eikke.com/feed/">
			<img src="http://eikke.com/wp-content/themes/carrington/img/rss-button.gif" alt="Ikke&#039;s blog latest posts" title="Ikke&#039;s blog latest posts" />
		</a>
	</div><!--.widget-->
	<div id="carrington-about" class="widget">
		<div class="about">
			<h2 class="widget-title">About Ikke&#039;s blog</h2>
Random (mostly technical) braindumps by some guy known as &#8220;ikke&#8221;, &#8220;eikke&#8221; or maybe &#8220;Nicolas&#8221;. Read it if you like it, ignore it if you don&#8217;t. Even though I&#8217;m currently working at Sun Microsystems, this is a strictly personal website. Anything written here does not necessarily represent the opinions or position of my employer.<a class="more" href="http://eikke.com/about/">more &rarr;</a>		</div>
	</div><!--.widget-->

	<div id="primary-sidebar">
<div id="meta-2" class="widget widget_meta"><h2 class="widget-title">Meta</h2>			<ul>
						<li><a href="http://eikke.com/wp-login.php">Log in</a></li>
			<li><a href="http://eikke.com/feed/" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://eikke.com/comments/feed/" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>
						</ul>
<div class="clear"></div></div><div id="linkcat-8" class="widget widget_links"><h2 class="widget-title">Friends</h2>
	<ul class='xoxo blogroll'>
<li><a href="http://blog.realnitro.be/" rel="friend met co-worker" title="Blog of Jens  &#8216;RealNitro&#8217; Geiregat">Jens Geiregat</a></li>
<li><a href="http://peterdedecker.net/blog/index.php" rel="contact met" title="Blog of Peter &#8216;Sylvain&#8217; Dedecker">Peter Dedecker</a></li>
<li><a href="http://weblog.savanne.be/" rel="contact met" title="Blog of Ruben &#8216;RubenV&#8217; Vermeersch">Ruben Vermeersch</a></li>

	</ul>
<div class="clear"></div></div>
<div id="linkcat-23" class="widget widget_links"><h2 class="widget-title">Me</h2>
	<ul class='xoxo blogroll'>
<li><a href="http://www.last.fm/user/eikke/" rel="me" title="My last.fm profile page">last.fm</a></li>
<li><a href="http://www.linkedin.com/in/nicolastrangez" rel="me" title="My LinkedIn profile page">LinkedIn</a></li>
<li><a href="http://blog.eikke.com/" rel="me" title="My old blog">Old blog</a></li>

	</ul>
<div class="clear"></div></div>
<div id="linkcat-7" class="widget widget_links"><h2 class="widget-title">Planets</h2>
	<ul class='xoxo blogroll'>
<li><a href="http://planet.freedesktop.org/" title="Planet centralising blogs of everyone working on freedesktop.org projects">Planet Freedesktop</a></li>
<li><a href="http://planet.gnome.org/" rel="colleague" title="Planet centralising blogs of everyone working on the GNOME desktop">Planet GNOME</a></li>
<li><a href="http://planet.grep.be/" rel="colleague" title="Planet centralising blogs of belgians working on Free Software">Planet grep</a></li>
<li><a href="http://www.planet-ugent.be/" rel="contact" title="Planet centralising blogs of everyone somehow related to UGent">Planet UGent</a></li>

	</ul>
<div class="clear"></div></div>
<div id="text-301271331" class="widget widget_text"><h2 class="widget-title">License</h2>			<div class="textwidget"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.0/be/" title="Creative Commons Attribution-Noncommercial-Share Alike 2.0 Belgium License">
<img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/2.0/be/88x31.png" />
</a></div>
		<div class="clear"></div></div>	</div><!--#primary-sidebar-->
	<div id="secondary-sidebar">
<div id="twitter-429238881" class="widget widget_twitter"><div><h2 class="widget-title"><span class='twitterwidget twitterwidget-title'>Me @ Twitter</span></h2><ul><li><span class='entry-content'><a href="http://twitter.com/donsbot" class="twitter-user">@donsbot</a> Any reason Data.ByteString.zipWith' isn't exported/public API?</span> <span class='entry-meta'><span class='time-meta'><a href="http://twitter.com/eikke/statuses/147836017301389312">12:30:27 AM December 17, 2011</a></span> <span class='from-meta'>from web</span> <span class="in-reply-to-meta"><a href="http://twitter.com/donsbot/statuses/" class="reply-to">in reply to donsbot</a></span></span> <span class="intent-meta"><a href="http://twitter.com/intent/tweet?in_reply_to=147836017301389312" class="in-reply-to" data-lang="en" title="Reply">Reply</a><a href="http://twitter.com/intent/retweet?tweet_id=147836017301389312" class="retweet" data-lang="en" title="Retweet">Retweet</a><a href="http://twitter.com/intent/favorite?tweet_id=147836017301389312" class="favorite" data-lang="en" title="Favorite">Favorite</a></span></li><li><span class='entry-content'>RT <a href="http://twitter.com/raichoo" class="twitter-user">@raichoo</a>: "#Ocaml has an OOP extension… that nobody uses […] not even its inventor" -Yaron Minsky, Janestreet.</span> <span class='entry-meta'><span class='time-meta'><a href="http://twitter.com/eikke/statuses/147790118328074241">09:28:04 PM December 16, 2011</a></span> <span class='from-meta'>from web</span></span> <span class="intent-meta"><a href="http://twitter.com/intent/tweet?in_reply_to=147790118328074241" data-lang="en" class="in-reply-to" title="Reply">Reply</a><a href="http://twitter.com/intent/retweet?tweet_id=147790118328074241" data-lang="en" class="retweet" title="Retweet">Retweet</a><a href="http://twitter.com/intent/favorite?tweet_id=147790118328074241" data-lang="en" class="favorite" title="Favorite">Favorite</a></span></li><li><span class='entry-content'>Whenever you launch a tech startup, don't look for office space: head to Starbucks. Coffee, power &#038; free wifi, all you need is a laptop!</span> <span class='entry-meta'><span class='time-meta'><a href="http://twitter.com/eikke/statuses/147745522264965120">06:30:52 PM December 16, 2011</a></span> <span class='from-meta'>from web</span></span> <span class="intent-meta"><a href="http://twitter.com/intent/tweet?in_reply_to=147745522264965120" data-lang="en" class="in-reply-to" title="Reply">Reply</a><a href="http://twitter.com/intent/retweet?tweet_id=147745522264965120" data-lang="en" class="retweet" title="Retweet">Retweet</a><a href="http://twitter.com/intent/favorite?tweet_id=147745522264965120" data-lang="en" class="favorite" title="Favorite">Favorite</a></span></li><li><span class='entry-content'><a href="http://twitter.com/viktorklang" class="twitter-user">@viktorklang</a> Bit me a couple of time in the Haskell bindings as well. Simple approach to make a library "threadsafe"?</span> <span class='entry-meta'><span class='time-meta'><a href="http://twitter.com/eikke/statuses/147697399807213568">03:19:38 PM December 16, 2011</a></span> <span class='from-meta'>from web</span> <span class="in-reply-to-meta"><a href="http://twitter.com/viktorklang/statuses/147668055768576000" class="reply-to">in reply to viktorklang</a></span></span> <span class="intent-meta"><a href="http://twitter.com/intent/tweet?in_reply_to=147697399807213568" class="in-reply-to" data-lang="en" title="Reply">Reply</a><a href="http://twitter.com/intent/retweet?tweet_id=147697399807213568" class="retweet" data-lang="en" title="Retweet">Retweet</a><a href="http://twitter.com/intent/favorite?tweet_id=147697399807213568" class="favorite" data-lang="en" title="Favorite">Favorite</a></span></li><li><span class='entry-content'>W00t ^_^ RT <a href="http://twitter.com/johtib" class="twitter-user">@johtib</a> Screenshot teaser for something I've been working on lately: <a href="http://t.co/OyGog474">http://t.co/OyGog474</a></span> <span class='entry-meta'><span class='time-meta'><a href="http://twitter.com/eikke/statuses/147667168144793600">01:19:31 PM December 16, 2011</a></span> <span class='from-meta'>from web</span></span> <span class="intent-meta"><a href="http://twitter.com/intent/tweet?in_reply_to=147667168144793600" data-lang="en" class="in-reply-to" title="Reply">Reply</a><a href="http://twitter.com/intent/retweet?tweet_id=147667168144793600" data-lang="en" class="retweet" title="Retweet">Retweet</a><a href="http://twitter.com/intent/favorite?tweet_id=147667168144793600" data-lang="en" class="favorite" title="Favorite">Favorite</a></span></li></ul><div class="follow-button"><a href="http://twitter.com/eikke" class="twitter-follow-button" title="Follow @eikke" data-lang="en">@eikke</a></div></div><div class="clear"></div></div><div id="tag_cloud-2" class="widget widget_tag_cloud"><h2 class="widget-title">Tags</h2><div class="tagcloud"><a href='http://eikke.com/tag/3d/' class='tag-link-42' title='1 topic' style='font-size: 8pt;'>3D</a>
<a href='http://eikke.com/tag/ajax/' class='tag-link-26' title='1 topic' style='font-size: 8pt;'>ajax</a>
<a href='http://eikke.com/tag/belgium/' class='tag-link-44' title='1 topic' style='font-size: 8pt;'>belgium</a>
<a href='http://eikke.com/tag/bnf/' class='tag-link-62' title='2 topics' style='font-size: 10.863636363636pt;'>bnf</a>
<a href='http://eikke.com/tag/cellphone/' class='tag-link-32' title='1 topic' style='font-size: 8pt;'>cellphone</a>
<a href='http://eikke.com/tag/couchdb/' class='tag-link-14' title='2 topics' style='font-size: 10.863636363636pt;'>couchdb</a>
<a href='http://eikke.com/tag/crash/' class='tag-link-17' title='1 topic' style='font-size: 8pt;'>crash</a>
<a href='http://eikke.com/tag/desktop/' class='tag-link-13' title='5 topics' style='font-size: 15.636363636364pt;'>Desktop</a>
<a href='http://eikke.com/tag/development/' class='tag-link-5' title='11 topics' style='font-size: 20.409090909091pt;'>Development</a>
<a href='http://eikke.com/tag/django/' class='tag-link-6' title='7 topics' style='font-size: 17.545454545455pt;'>django</a>
<a href='http://eikke.com/tag/django-validation/' class='tag-link-60' title='2 topics' style='font-size: 10.863636363636pt;'>django-validation</a>
<a href='http://eikke.com/tag/evolution/' class='tag-link-20' title='1 topic' style='font-size: 8pt;'>evolution</a>
<a href='http://eikke.com/tag/fglrx/' class='tag-link-18' title='1 topic' style='font-size: 8pt;'>fglrx</a>
<a href='http://eikke.com/tag/firefox/' class='tag-link-21' title='1 topic' style='font-size: 8pt;'>firefox</a>
<a href='http://eikke.com/tag/form/' class='tag-link-27' title='3 topics' style='font-size: 12.772727272727pt;'>form</a>
<a href='http://eikke.com/tag/free-desktop/' class='tag-link-50' title='2 topics' style='font-size: 10.863636363636pt;'>free desktop</a>
<a href='http://eikke.com/tag/functional-programming/' class='tag-link-77' title='3 topics' style='font-size: 12.772727272727pt;'>functional programming</a>
<a href='http://eikke.com/tag/gadget/' class='tag-link-41' title='1 topic' style='font-size: 8pt;'>gadget</a>
<a href='http://eikke.com/tag/gnokii/' class='tag-link-36' title='1 topic' style='font-size: 8pt;'>gnokii</a>
<a href='http://eikke.com/tag/gnome/' class='tag-link-16' title='4 topics' style='font-size: 14.363636363636pt;'>gnome</a>
<a href='http://eikke.com/tag/government/' class='tag-link-46' title='1 topic' style='font-size: 8pt;'>government</a>
<a href='http://eikke.com/tag/head-tracking/' class='tag-link-40' title='2 topics' style='font-size: 10.863636363636pt;'>head tracking</a>
<a href='http://eikke.com/tag/javascript/' class='tag-link-25' title='5 topics' style='font-size: 15.636363636364pt;'>javascript</a>
<a href='http://eikke.com/tag/jfs/' class='tag-link-22' title='1 topic' style='font-size: 8pt;'>jfs</a>
<a href='http://eikke.com/tag/jquery/' class='tag-link-30' title='1 topic' style='font-size: 8pt;'>jquery</a>
<a href='http://eikke.com/tag/kde/' class='tag-link-49' title='2 topics' style='font-size: 10.863636363636pt;'>kde</a>
<a href='http://eikke.com/tag/kde4/' class='tag-link-48' title='2 topics' style='font-size: 10.863636363636pt;'>kde4</a>
<a href='http://eikke.com/tag/linux/' class='tag-link-12' title='4 topics' style='font-size: 14.363636363636pt;'>Linux</a>
<a href='http://eikke.com/tag/microsoft/' class='tag-link-67' title='2 topics' style='font-size: 10.863636363636pt;'>microsoft</a>
<a href='http://eikke.com/tag/newforms/' class='tag-link-28' title='3 topics' style='font-size: 12.772727272727pt;'>newforms</a>
<a href='http://eikke.com/tag/nokia-6300/' class='tag-link-33' title='2 topics' style='font-size: 10.863636363636pt;'>nokia 6300</a>
<a href='http://eikke.com/tag/opensync/' class='tag-link-35' title='2 topics' style='font-size: 10.863636363636pt;'>opensync</a>
<a href='http://eikke.com/tag/parsing/' class='tag-link-61' title='2 topics' style='font-size: 10.863636363636pt;'>parsing</a>
<a href='http://eikke.com/tag/pidgin/' class='tag-link-19' title='1 topic' style='font-size: 8pt;'>pidgin</a>
<a href='http://eikke.com/tag/politics/' class='tag-link-45' title='1 topic' style='font-size: 8pt;'>politics</a>
<a href='http://eikke.com/tag/python/' class='tag-link-15' title='14 topics' style='font-size: 22pt;'>python</a>
<a href='http://eikke.com/tag/rant/' class='tag-link-37' title='1 topic' style='font-size: 8pt;'>rant</a>
<a href='http://eikke.com/tag/rendering/' class='tag-link-43' title='1 topic' style='font-size: 8pt;'>rendering</a>
<a href='http://eikke.com/tag/snippet/' class='tag-link-24' title='1 topic' style='font-size: 8pt;'>snippet</a>
<a href='http://eikke.com/tag/sun/' class='tag-link-85' title='2 topics' style='font-size: 10.863636363636pt;'>Sun</a>
<a href='http://eikke.com/tag/syncml/' class='tag-link-34' title='2 topics' style='font-size: 10.863636363636pt;'>syncml</a>
<a href='http://eikke.com/tag/validation/' class='tag-link-29' title='3 topics' style='font-size: 12.772727272727pt;'>validation</a>
<a href='http://eikke.com/tag/virtualbox/' class='tag-link-52' title='3 topics' style='font-size: 12.772727272727pt;'>virtualbox</a>
<a href='http://eikke.com/tag/virtual-reality/' class='tag-link-39' title='2 topics' style='font-size: 10.863636363636pt;'>Virtual Reality</a>
<a href='http://eikke.com/tag/wii/' class='tag-link-38' title='2 topics' style='font-size: 10.863636363636pt;'>wii</a></div>
<div class="clear"></div></div>	</div><!--#secondary-sidebar-->

	<div class="clear"></div>
</div><!--#sidebar-->			<div class="clear"></div>
			</div><!-- .wrapper -->
		</div><!-- #main -->
		<hr class="lofi" />
		<div id="footer" class="section">
			<div class="wrapper">		
				<p id="generator-link">Proudly powered by <a href="http://wordpress.org/" rel="generator">WordPress</a> and <a href="http://carringtontheme.com/" title="Carrington theme for WordPress">Carrington</a>.</p>
			</div><!--.wrapper-->
		</div><!--#footer -->
	</div><!--#page-->
	<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10069879-1");
pageTracker._trackPageview();
} catch(err) {}</script><script type='text/javascript' src='http://platform.twitter.com/widgets.js?ver=1.0.0'></script>
<!--stats_footer_test--><script src="http://stats.wordpress.com/e-201250.js" type="text/javascript"></script>
<script type="text/javascript">
st_go({blog:'2379387',v:'ext',post:'129'});
var load_cmc = function(){linktracker_init(2379387,129,2);};
if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
else load_cmc();
</script>
</body>

<!-- Mirrored from eikke.com/scala-tail-recursion-decompiler/?replytocom=26508 by HTTrack Website Copier/3.x [XR&CO'2010], Tue, 11 Dec 2012 20:25:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
</html>
<!-- Dynamic page generated in 0.722 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-12-11 21:32:50 -->
<!-- Compression = gzip -->